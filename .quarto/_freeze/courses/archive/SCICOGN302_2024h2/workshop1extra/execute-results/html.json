{
  "hash": "06a196839f859678509eff6ec02c892c",
  "result": {
    "engine": "knitr",
    "markdown": "---\nlayout: page\ntitle: \"SCICOGN302 workshop I: <br>Additional material\"\nsubtitle: \"Fall 2024\"\ndate: \"Last updated: 2025-08-17\"\n---\n\n\n\n\n# Introduction\n\nThis tutorial shows you how you can use the `mutate()`, `group_by()` and `summarize()` functions to compute more complex measures of linguistic development than what was shown in the Data Center workshop.\n\nIf you have not done so yet, load the three packages we used in the workshop, and load Amy's transcript data in the token-based format.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidytext)\nlibrary(childesr)\n\ntokens <- get_tokens(token = \"*\", collection = \"Eng-NA\", target_child = \"Amy\",\n                     corpus = \"VanKleeck\", role = \"target_child\")\n```\n:::\n\n\n# Computing new variables\n\n## `mutate()`\n\nThe `mutate()` function is useful when you want to create new variables or overwrite existing ones. For instance, you can calculate the length of each word Amy used by using the `str_length()` function, and assign the result to a new variable called `length`. I use the `select()` function to display only a subset of the variables, and the `head()` function to display only the first 10 observations.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntoken_length <- tokens %>% \n  mutate(length = str_length(gloss)) \n\ntoken_length %>% \n  select(id, gloss, stem, length) %>% \n  head(10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 4\n        id gloss  stem    length\n     <int> <chr>  <chr>    <int>\n 1 3499800 white  \"white\"      5\n 2 3499804 xxx    \"\"           3\n 3 3499886 hi     \"hi\"         2\n 4 3499906 xxx    \"\"           3\n 5 3499911 okay   \"okay\"       4\n 6 3499912 bye    \"bye\"        3\n 7 3499938 the    \"the\"        3\n 8 3499939 farmer \"farm\"       6\n 9 3499961 okay   \"okay\"       4\n10 3499976 yeah   \"yeah\"       4\n```\n\n\n:::\n:::\n\n\nYou can also use mutate to create indicator variables: the next example uses a logical expression that is true if the word is a noun.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntokens %>% \n  mutate(noun = part_of_speech == \"n\") %>% \n  select(id, gloss, stem, noun) %>% \n  head(10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 4\n        id gloss  stem    noun \n     <int> <chr>  <chr>   <lgl>\n 1 3499800 white  \"white\" FALSE\n 2 3499804 xxx    \"\"      FALSE\n 3 3499886 hi     \"hi\"    FALSE\n 4 3499906 xxx    \"\"      FALSE\n 5 3499911 okay   \"okay\"  FALSE\n 6 3499912 bye    \"bye\"   FALSE\n 7 3499938 the    \"the\"   FALSE\n 8 3499939 farmer \"farm\"  TRUE \n 9 3499961 okay   \"okay\"  FALSE\n10 3499976 yeah   \"yeah\"  FALSE\n```\n\n\n:::\n:::\n\n\n## `group_by()` and `summarize()`\n\nWhile `mutate()` creates a new variable for each row of the data, `summarize()` collapses the data to a smaller dimension by applying a function (e.g. `sum()` or `mean()`) to the data.\n\nFor instance, if you use `mutate()` to get the length of each word, you can use `summarize()` to find the mean word length of all observations:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntoken_length %>% \n  summarize(length = mean(length))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 1\n  length\n   <dbl>\n1   3.76\n```\n\n\n:::\n:::\n\n\nAmy's average word in this data is almost 4 letters long.\n\nYou can also do more complex operations rather than averages. The following example uses the indicator variable for nouns to calculate the total fraction of nouns in Amy's speech: we can use the `sum()` function to get the total number of nouns (the TRUE/FALSE indicator is treated as 1/0), and divide that by the total number of observations `n()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntokens %>% \n  mutate(noun = part_of_speech == \"n\") %>% \n  summarize(noun_prop = sum(noun)/n())\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 1\n  noun_prop\n      <dbl>\n1     0.123\n```\n\n\n:::\n:::\n\n\nSo approximately 12% of Amy's words were nouns.\n\nSometimes you don't want to aggregate the full dataset, but get summaries per group, e.g. the average word length per transcript. You can accomplish that by specifying one or more grouping variables with the `group_by()` function before calling `summarize()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntoken_length %>% \n  group_by(transcript_id) %>% \n  summarize(length = mean(length))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 2\n  transcript_id length\n          <int>  <dbl>\n1          4258   3.66\n2          4259   3.81\n```\n\n\n:::\n:::\n\n\n# More materials\n\nYou can find a list of helpful links for data manipulation and visualization [here](../../../tutorials/links).\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}
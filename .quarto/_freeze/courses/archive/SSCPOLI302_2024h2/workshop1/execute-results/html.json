{
  "hash": "fb82125e027021474e0b3094b97b453f",
  "result": {
    "engine": "knitr",
    "markdown": "---\nlayout: page\ntitle: \"SSCPOLI302:<br> Analysis of MEPs (draft)\"\nsubtitle: \"Fall 2024\"\ndate: \"Last updated: 2025-08-17\"\n---\n\n\n# Preparation\n\n## Before the workshop\n\nTo prepare for the class, please complete the following:\n\n-   read the \"Setting up R\" tutorial series ([link](../../../tutorials))\n-   using the tutorials:\n    -   install R and RStudio\n    -   create a new R project for the EU Politics course\n    -   install the `tidyverse` package\n-   bring your fully charged laptop and headphones to class\n\n## During the workshop\n\nThe Data Center workshops in this course have two components. First, you'll follow a series of general tutorials that present the R skills you'll need for the course. Second, you'll apply these skills to a specific case study related to the course content.\n\nBefore you proceed to the case study below, please follow along with these tutorials:\n\n1.  [Data wrangling: filtering rows and selecting columns](../../../tutorials/r_intro_subset)\n2.  [Data wrangling: creating new variables](../../../tutorials/r_intro_mutate)\n3.  [Data wrangling: summarizing data (within groups)](../../../tutorials/r_intro_summarize)\n4.  [The tidy workflow](../../../tutorials/r_intro_pipe)\n5.  [Data visualization: introduction to `ggplot`](../../../tutorials/r_ggplot_intro)\n6.  [Data visualization: distributions](../../../tutorials/r_ggplot_univariate)\n\n# Loading libraries and data\n\n\n\n\n\nThe data for this workshop is stored in an Excel file on the Data Center's GitHub repository ([link](https://github.com/ucrdatacenter/projects/blob/main/SSCPOLI302/2024h2/meetings.xlsx)). The `import()` function from the `rio` package allows us to import an Excel file directly into R from a URL, without needing to download the file. Unfortunately during the importing the data, the `meeting_date` column is not automatically recognized as a date, therefore we need to convert it to a date format using the `as.Date()` function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install and load the necessary packages\n# install.packages(\"tidyverse\")\n# install.packages(\"rio\")\nlibrary(tidyverse)\nlibrary(rio)\n\n# load the meeting data from GitHub\nmeetings <- import(\"https://github.com/ucrdatacenter/projects/raw/main/SSCPOLI302/2024h2/meetings.xlsx\", setclass = \"tbl_df\") |> \n  mutate(meeting_date = as.Date(meeting_date))\n```\n:::\n\n\n# Describing the MEPs in the data\n\nList and count the total number of MEPs in the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# get all MEP names, MEP ID's, and nationalities\nMEPs <- meetings |> \n  distinct(member_name, member_id, country)\n  \nhead(MEPs) # show the first few rows\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 3\n  member_name           member_id country    \n  <chr>                     <dbl> <chr>      \n1 GIESEKE Jens             124807 Germany    \n2 KÖRNER Moritz            197445 Germany    \n3 BLOSS Michael            197449 Germany    \n4 BURKHARDT Delara         197440 Germany    \n5 SCHREINEMACHER Liesje    197869 Netherlands\n6 DELLI Karima              96868 France     \n```\n\n\n:::\n\n```{.r .cell-code}\nnrow(MEPs) # number of MEPs in the data\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 640\n```\n\n\n:::\n:::\n\n\nNot all of the 705 MEPs of term 2019-2024 are represented in the data.\n\n# Differences between member states\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# count the number of MEPs per country\nMEPs |>\n  count(country, sort = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 27 × 2\n   country         n\n   <chr>       <int>\n 1 Germany        98\n 2 France         73\n 3 Italy          65\n 4 Spain          56\n 5 Poland         40\n 6 Netherlands    29\n 7 Romania        28\n 8 Sweden         25\n 9 Hungary        21\n10 Belgium        19\n# ℹ 17 more rows\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# count the number of meetings per country\nmeetings |> \n  count(country, sort = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 27 × 2\n   country         n\n   <chr>       <int>\n 1 Germany     17231\n 2 France       9009\n 3 Spain        5665\n 4 Finland      4756\n 5 Netherlands  4645\n 6 Sweden       4575\n 7 Denmark      3036\n 8 Italy        2652\n 9 Belgium      2644\n10 Austria      2106\n# ℹ 17 more rows\n```\n\n\n:::\n:::\n\n\nWe can show differences between countries by plotting the number of meetings per country on a bar chart.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# plot the number of meetings per country\nmeetings |> \n  count(country, sort = TRUE) |> \n  ggplot() +\n  geom_col(aes(x = n, y = country)) +\n  labs(title = \"Number of meetings per country between 2019-2024\", \n       x = \"Country\", \n       y = \"Number of meetings\")\n```\n\n::: {.cell-output-display}\n![](workshop1_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nWe can improve the display by arranging the bars based on the number of meetings with the `reorder()` function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# plot the number of meetings per country\nmeetings |> \n  count(country, sort = TRUE) |> \n  ggplot() +\n  geom_col(aes(x = n, y = reorder(country, n))) +\n  labs(title = \"Number of meetings per country between 2019-2024\", \n       x = \"Country\", \n       y = \"Number of meetings\")\n```\n\n::: {.cell-output-display}\n![](workshop1_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nIn this figure, the largest countries have the most meetings, which is expected given that they have more MEPs. To account for this difference, we can instead plot the average number of meetings per MEP in each country, by dividing the number of meetings by the number of MEPs.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# average number of meetings per MEP in each country\ncountries <- meetings |> \n  group_by(country) |>\n  summarize(n_meetings = n(),\n            n_meps = n_distinct(member_id),\n            avg_meetings = n_meetings / n_meps)\n```\n:::\n\n\nTo visualize differences between countries in the average number of meetings of their MEPs, we can present the data on a bar chart.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# plot the average number of meetings per MEP for each country\ncountries |> \n  ggplot() +\n  geom_col(aes(x = avg_meetings, y = reorder(country, avg_meetings))) +\n  labs(title = \"Average number of meetings per MEP between 2019-2024\", \n       x = \"Country\", \n       y = \"Average number of meetings per MEP\")\n```\n\n::: {.cell-output-display}\n![](workshop1_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nThis figure tells us more about the activity of MEPs in each country, as it accounts for the number of MEPs in each country. We can see that MEPs from Finland are particularly active. On the other hand, Cyprus not only has the fewest MEPs but also the fewest meetings per MEP.\n\n# Meeting timelines\n\nSome countries have more MEPs than their EP seats. This means that an EP member did not finish their term and was replaced by another, such as the case of Liesje Schreinemacher.\n\nWe can plot the distribution of meetings over time with a histogram. A histogram aggregates the data into bins and counts the number of observations in each bin. In this case, we set each bin to be 30 days wide.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# meeting dates of Liesje Schreinemacher\nmeetings |>\n  filter(member_name == \"SCHREINEMACHER Liesje\") |> \n  ggplot() +\n  geom_histogram(aes(x = meeting_date), binwidth = 30) +\n  labs(title = \"Meeting activity of Liesje Schreinemacher during her\n         MEP career\", \n       x = \"Date\", \n       y = \"Frequency of meetings\")\n```\n\n::: {.cell-output-display}\n![](workshop1_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nWe can also compare the density of Liesje Schreinemacher's meetings to the overall meeting density of the EP. We will do this by changing a few things within the code.\n\nFirst, we take the `meetings` dataset and define a new variable `MEP` that indicates whether the MEP is Liesje Schreinemacher or not. Then, we plot the histogram of the density of meetings for both Liesje Schreinemacher and the other MEPs. We set the fill of the histogram to be different depending on whether the MEP is Liesje Schreinemacher or not.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmeetings |> \n  mutate(MEP = ifelse(member_name == \"SCHREINEMACHER Liesje\",\n                      \"Liesje Schreinemacher\",\n                      \"Other MEPs\")) |>\n  ggplot() +\n  geom_histogram(aes(x = meeting_date, fill = MEP), binwidth = 30) +\n  labs(title = \"Meeting activity of Liesje Schreinemacher compared to other MEPs\", \n       x = \"Date\", \n       y = \"Frequency of meetings\")\n```\n\n::: {.cell-output-display}\n![](workshop1_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nBy default the histogram shows the count of meetings. Compared to the sum all MEPs, Liesje Schreinemacher had so few meetings that her histogram is barely visible. By specifying the `y` aesthetic to be a rescaled version of the count (so that the highest value within a group is 1), we override this default behavior and make the comparison more informative. We accomplish this by specifying `after_stat(ncount)` as the `y` aesthetic. In addition, we can put the bars of the groups next to each other instead of stacking them by specifying `position = \"dodge\"`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmeetings |> \n  mutate(MEP = ifelse(member_name == \"SCHREINEMACHER Liesje\",\n                      \"Liesje Schreinemacher\",\n                      \"Other MEPs\")) |>\n  ggplot() +\n  geom_histogram(aes(x = meeting_date, y = after_stat(ncount), fill = MEP),\n                 binwidth = 30, position = \"dodge\") +\n    labs(title = \"Meeting activity of Liesje Schreinemacher compared to other MEPs\", \n       x = \"Date\", \n       y = \"Frequency of meetings (rescaled)\")\n```\n\n::: {.cell-output-display}\n![](workshop1_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\nAs we can see, Liesje Schreinemacher's activity stops about midway through 2022, which is when she exited the EP.\n\n# Differences between political groups\n\nFirst, we can compare the number of meetings from each political group who declared meetings compared to the total number of seats of each group. Calculating the average number of meetings per seat in the political groups helps us see which group has held the most meetings on average while accounting for their size. We use seats because only one MEP can occupy a seat at a time, therefore this definition accounts for groups that saw many MEP replacements and thus have more MEPs than seats in their data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# define the number of seats per group (as of May 2024) and the position of each group on the left-right spectrum\nseats <- tribble(\n  ~political_group, ~seats, ~leftright,\n  \"EPP\", 176, 5,\n  \"S&D\", 139, 3,\n  \"Renew\", 102, 4,\n  \"Greens\", 72, 2,\n  \"ECR\", 69, 6,\n  \"Non-attached\", 61, 8,\n  \"ID\", 49, 7,\n  \"the Left\", 37, 1)\n\n# count the number of meetings per political group in the meeting data\nmeetings_per_seat <- meetings |> \n  count(political_group) |> \n  # merge with the number of seats per group\n  left_join(seats, by = \"political_group\") |> \n  # calculate the number of meetings per seat\n  mutate(meetings_per_seat = n / seats)\n```\n:::\n\n\nWe can compare visualizations for the number of MEPs per political group and the average number of meetings per seat in each political group using bar charts.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# number of MEP seats per political group\nmeetings_per_seat |> \n  ggplot() +\n  geom_col(aes(x = political_group, y = seats)) +\n  labs(title = \"Number of MEPs per political group in May 2024\", \n       x = \"Political group\", \n       y = \"Number of MEPs\")\n```\n\n::: {.cell-output-display}\n![](workshop1_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\nTo improve the quality of the graph, we can organize the bars based on the political orientation of the political group. In addition, we can specify the colors of the bars to match those of their political groups. We define these colors in a separate vector and use the `scale_fill_manual()` function to apply them to the plot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# define political group colors\ncolors <- c(\"EPP\" = \"deepskyblue\", \n            \"S&D\" = \"red\",\n            \"Renew\" = \"gold\", \n            \"Greens\" = \"forestgreen\",\n            \"ECR\" = \"deepskyblue4\", \n            \"ID\" = \"darkblue\", \n            \"the Left\" = \"darkred\", \n            \"Non-attached\" = \"grey\")\n\n# number of MEP seats per political group\nmeetings_per_seat |> \n  ggplot() +\n  geom_col(aes(x = reorder(political_group, leftright), y = seats, \n               fill = political_group),\n           # color the borders of the bars black and hide the legend\n           color = \"black\", show.legend = FALSE) +\n  labs(title = \"Number of MEPs per political group in May 2024\", \n       x = \"Political group\", \n       y = \"Number of MEPs\") +\n  scale_fill_manual(values = colors)\n```\n\n::: {.cell-output-display}\n![](workshop1_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\nNow compare the previous plot to the average number of meetings per seat in each political group.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# average number of meetings per seat per political group\nmeetings_per_seat |> \n  ggplot() +\n  geom_col(aes(x = reorder(political_group, leftright), \n               y = meetings_per_seat, fill = political_group),\n           color = \"black\", show.legend = FALSE) +\n  labs(title = \"Average number of reported meetings per seat\", \n       x = \"Political group\", \n       y = \"Number of meetings per seat\") +\n  scale_fill_manual(values = colors)\n```\n\n::: {.cell-output-display}\n![](workshop1_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n# Role distributions\n\nMeetings also differ based on the roles of the MEP in the meeting. First, let's compare the number of meetings for each role.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmeetings |> \n  count(member_capacity, sort = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 7 × 2\n  member_capacity                   n\n  <chr>                         <int>\n1 Member                        45560\n2 Shadow rapporteur             10064\n3 Rapporteur                     9009\n4 Committee chair                2207\n5 Shadow rapporteur for opinion   824\n6 Rapporteur for opinion          753\n7 Delegation chair                175\n```\n\n\n:::\n:::\n\n\nWe can combine this information with the political group of the MEP to see which combination of political groups and roles are most common.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmeetings |> \n  count(political_group, member_capacity, sort = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 53 × 3\n   political_group member_capacity       n\n   <chr>           <chr>             <int>\n 1 S&D             Member            12955\n 2 Greens          Member            11435\n 3 Renew           Member             9547\n 4 EPP             Member             7257\n 5 S&D             Rapporteur         3184\n 6 EPP             Rapporteur         2684\n 7 Renew           Shadow rapporteur  2480\n 8 S&D             Shadow rapporteur  2314\n 9 Greens          Shadow rapporteur  2257\n10 the Left        Member             2013\n# ℹ 43 more rows\n```\n\n\n:::\n:::\n\n\nFor our purposes the only relevant meetings are the ones attached to a legislative dossier. This is important for full transparency about the legislative dossier their meeting relates to.\n\nLet's look at what share of meetings has a reference to a legislative dossier per role. We first count the number of meetings with and without added references per member role. We divide these counts with the total number of meetings per role to get the share of meetings with a reference, and plot these results on a bar chart.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmeetings |> \n  mutate(reference = !is.na(procedure_reference)) |>\n  count(member_capacity, reference) |> \n  group_by(member_capacity) |>\n  mutate(reference_share = n / sum(n)) |> \n  ggplot() +\n  geom_col(aes(x = reference_share, \n               y = member_capacity, \n               fill = reference)) +\n  labs(title = \"Share of meetings with a reference to a legislative dossier\", \n       x = \"Share of meetings\",\n       y = \"Role\",\n       fill = \"Linked reference\")\n```\n\n::: {.cell-output-display}\n![](workshop1_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\nNow let's plot the distribution of political groups within each role, focusing only on meetings with a legislative dossier reference.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmeetings |> \n  drop_na(procedure_reference) |>\n  count(political_group, member_capacity) |>\n  ggplot() +\n  geom_col(aes(x = n, y = member_capacity, fill = political_group)) +\n  labs(title = \"Meeting frequency per role and political group\", \n       x = \"Number of meetings\",\n       y = \"Role\",\n       fill = \"Political group\") +\n  scale_fill_manual(values = colors)\n```\n\n::: {.cell-output-display}\n![](workshop1_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "workshop1_files\\figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}
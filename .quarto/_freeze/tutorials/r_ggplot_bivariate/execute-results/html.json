{
  "hash": "a5fcce33e403a5f42f0c51f3138e8523",
  "result": {
    "engine": "knitr",
    "markdown": "---\nlayout: page\ntitle: \"Data visualization: relationships between variables\"\ndate: \"Last updated: 2025-08-17\"\n---\n\n\n\n\n# Introduction\n\nBefore you proceed, make sure you're familiar with the logic of `ggplot`, as explained in our [introduction to `ggplot` tutorial](../r_ggplot_intro.qmd).\n\nWe'll use the `diamonds` dataset that comes pre-loaded with `tidyverse` to demonstrate how to plot relationships between two variables, so let's load `tidyverse` and have a look at the dataset:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load tidyverse\nlibrary(tidyverse)\n\n# add diamonds to the environment\ndata(diamonds)\n```\n:::\n\n\n# Bivariate plots\n\nYou can plot two continuous variables with a scatter plot. For example, you can plot the relationship between price and carat by specifying these variables as the x and y aesthetics:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# basic scatter plot\nggplot(diamonds, aes(x = price, y = carat)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](r_ggplot_bivariate_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nFitting a smooth curve or a linear regression line to the scatter plot can help you see the overall trend in the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# scatter plot with fitted smooth curve\nggplot(diamonds, aes(x = price, y = carat)) +\n  geom_point() + \n  geom_smooth()\n```\n\n::: {.cell-output-display}\n![](r_ggplot_bivariate_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# scatter plot with linear regression line\nggplot(diamonds, aes(x = price, y = carat)) +\n  geom_point() + \n  # method = \"lm\" fits a linear model, se = FALSE removes the confidence interval\n  geom_smooth(method = \"lm\", se = FALSE)\n```\n\n::: {.cell-output-display}\n![](r_ggplot_bivariate_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n:::\n\n\nCategorical variables can be used to show the distribution of continuous variables by group. You can put a categorical variable on one of the axes, or use it on another aesthetic, such as the fill or color. Note that if a variable determines the fill, the color, and the shape of the points, that has to be specified inside an `aes()` function, while if the characteristic is pre-defined, then it goes outside the `aes()` function. Also note that if you specify aesthetics in the main `ggplot()` function, then they apply to all geoms, while if you specify them in a `geom_...()` function, they apply only to that geom.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# box plot of price by cut\nggplot(diamonds, aes(x = price, y = cut)) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](r_ggplot_bivariate_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# density plot of price by cut\nggplot(diamonds) +\n  geom_density(aes(x = price, fill = cut), alpha = 0.5)\n```\n\n::: {.cell-output-display}\n![](r_ggplot_bivariate_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n:::\n\n\nTo plot two categorical variables, you can use a bar plot with an extra grouping argument. For example, we can plot the number of diamonds with each combination of cut and color:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(diamonds, aes(x = cut, fill = color)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](r_ggplot_bivariate_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# to put the bars next to each other instead of on top, specify the position\nggplot(diamonds, aes(x = cut, fill = color)) +\n  geom_bar(position = \"dodge\")\n```\n\n::: {.cell-output-display}\n![](r_ggplot_bivariate_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n:::\n\n\nWhenever you make a plot, make sure to use clear labels and titles with the `labs()` function to make your visualization easy to understand.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(diamonds, aes(x = price, y = carat)) +\n  geom_point() +\n  labs(title = \"Relationship between price and carat\",\n       x = \"Price of diamond\",\n       y = \"Carat of diamond\")\n```\n\n::: {.cell-output-display}\n![](r_ggplot_bivariate_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nTo learn more about other geoms and customization options, have a look at our [advanced visualization tutorial](../r_adv_ggplot) and [additional resources](../links#Help%20with%20%60ggplot%60).\n",
    "supporting": [
      "r_ggplot_bivariate_files\\figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}
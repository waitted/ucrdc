{"title":"AH-ANTQ103: Workshop 2","markdown":{"yaml":{"layout":"page","title":"AH-ANTQ103: Workshop 2","subtitle":"Spring 2025","date":"Last updated: `r Sys.Date()`"},"headingText":"Introduction","containsRefs":false,"markdown":"\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE, message=FALSE, warning=FALSE, error=FALSE)\n```\n\n\nIn this workshop, we will expand on some of the basic functions, use tidyverse more and introduce some archaeology specific functions. It will follow the flow of a more typical data analysis workflow. We will again work with data about lithics from the Jerimalai rockshelter in East-Timor. This workshop has been inspired by the 'tidyverse for archaeologists' workshop by Professor Ben Marwick.\n\nSome of the code will be evaluated here, but some will not so please copy and paste the code into your own script and run it there.\n\nLoad the `tidyverse` and `rio` packages.\n\n```{r tidyverse, message=FALSE, warning=FALSE}\nlibrary(tidyverse)\nlibrary(rio)\n```\n\n## Data\n\nRemember that the data comes in the form of an excel file from a link, and that we load it in using the `import` function from the `rio` package.\n\n```{r import, message=FALSE, warning=FALSE}\ndata <- import(\"https://bit.ly/j_data_xlsx\", setclass = \"tbl_df\")\n```\n\nLet's have a more detailed look at the data.\n\n```{r looking_at_data, eval = FALSE}\nView(data)\nsummary(data)\n```\n\nThis is a lot of information, and not that useful for us, as it is more useful when dealing with true numerical data, something that happens more rarely in archaeological data science than in other disciplines.\n\nLet's try out some other new functions to look at a data frame that might be more useful in this case.\n\n```{r numbers_and_names}\nnames(data)\nhead(data)\n```\n\nWe will select the `Square`, `Spit`, `Material`, `Weight`, `Thick` and `Colour` columns. Note that we can select multiple columns in one go using the comma.\n\n```{r select, eval=FALSE}\ndata |> \n  select(Square, Spit, Material, Weight, Thick, Colour)\n```\n\n## Plot 1:\n\nWe now want to get into plotting our data. For this we are again only interested in the `Square`, `Spit`, `Material`, `Weight` and `Thick` columns.\n\nWile we work with data, we often change our data sets quite a lot depending on what we want to investigate, so it is necessary to cache our data sets under different names. That way we always keep track of which data is stored where, which is particularly important in archaeology given the vastly different types of analysis we can conduct with our data.\n\n```{r select_2, message=FALSE, warning=FALSE}\ndata_plotting <- data |> \n  select(Square, Spit, Material, Weight, Thick)\n\nprint(data_plotting)\n```\n\nWe can now create a histogram of the `Weight` column. This will show how many artefacts have a certain weight. Creating histograms of a variable is a common practice in archaeology, as it provides a quick visual overview of patterns. We can do this using the important `ggplot()` function. This function takes a tibble, and can then create all kinds of plots. `ggplot()` works with layers.\n\nWe can add these layers with a + sign. The base command is `ggplot()`. This creates a white canvas, and you can add information by adding layers.\n\n```{r ggplot, message=FALSE, warning=FALSE}\nggplot(data = data_plotting)\n```\n\nSince we have not told ggplot how to display the data yet, we still have a blank canvas.\n\nAs we want to make a histogram, we only need to specify the x axis, which is done by the `aes()` function within the `mapping` argument.\n\n```{r ggplot_2, message=FALSE, warning=FALSE}\nggplot(data = data_plotting, mapping = aes(x = Weight))\n```\n\nWe have now filled in the two most important `arguments` from `ggplot()`, `data` and `mapping`. Since these arguments are always the first two arguments in the `ggplot()` function, we often do not explicitly name them to save us some time.\n\nHowever, we still do not see a histogram, so now we need to add a layer that actually tells ggplot that we want the plot to be a histogram.\n\nThe layers that define the type of plot are known as `geoms()`. There are many different geoms, but we want to create a histogram, so we will use the `geom_histogram()` function.\n\n```{r ggplot_3, message=FALSE, warning=FALSE}\nggplot(data_plotting, aes(x = Weight)) +\n  geom_histogram()\n```\n\nWe can see our data on the plot!\n\nHowever, there appear to be some weights that are very large and cause the graph to stretch to 600, whilst most are close to zero. If we change the x-axis scale to a logaritmic scale, we can see the distribution better. We edit the scale by adding a new layer to our plot, in our case in the form of the `scale_x_log10()` function.\n\nA logarithm is a mathematical function that increases slowly at first, and then faster and faster. This is useful for data that has a large range (something you will be encountering more often with archaeological data), as it compresses the data and makes it easier to see the distribution. This specific logarithm is the base 10 logarithm, which means that 10 is raised to the power of the number on the x axis. For example, 10\\^2 = 100, so the number 2 would be at the position 100 on the x axis.\n\n```{r ggplot_4, message=FALSE, warning=FALSE}\nggplot(data_plotting, aes(x = Weight)) +\n  geom_histogram() +\n  scale_x_log10()\n```\n\nNow that it finally looks like an actual histogram, we can give it a last touch by changing the theme of the plot. This is purely an optical change and there are many themes available, but we will just use the `theme_bw()` theme for now, which we add like any other layer to our `ggplot()`.\n\n```{r ggplot_5, message=FALSE, warning=FALSE}\nggplot(data_plotting, aes(x = Weight)) +\n  geom_histogram() +\n  scale_x_log10() +\n  theme_bw()\n```\n\nThe graph shows us that the majority of findings are very light, yet a few are extremely heavy. This makes sense, considering that we expect the majority of pottery remnants we find to be only shards or smaller objects used in everyday life, with some rarer special items being very heavy.\n\n## Plot 2:\n\nfor our next plot, we only want to keep rows that have the \"A\" value for the `Square` column. We can do this using the `filter()` function. Keep in mind that \"A\" is a string, so we need to use quotation marks and two equal signs.\n\n```{r filter}\ndata_plotting_2 <- data |> \n  filter(Square == \"A\")\n```\n\nNow, from these rows we only want light objects, lets say with a `Weight` less than 10. We can do this by adding another condition to our `filter()` with the `&` (\"and\") operator.\n\n```{r filter_2}\ndata_plotting_2 |>\n  filter(Square == \"A\" & Weight < 10)\n```\n\n`&` is a very useful logical operator. Another very common logical operator is `|` (Shift + /), which stands for \"or\". If we wanted to include all observations that have an \"A\" or \"a\" value in the `Square` column for example, we could write the following code:\n\n```{r filter_6}\ndata_example_or <- data |>\n  filter(Square == \"A\" | Square == \"a\")\n```\n\nFor now we will continue and add to our previous filters though.\n\nWe also want a thickness between 0.2 and 20. We can either do this by adding two additional conditions, or by using the `between()` function.\n\n```{r filter_3}\ndata_plotting_2 |> \n  filter(Square == \"A\" & Weight < 10 & Thick > 0.2 & Thick < 20)\n```\n\n```{r filter_4}\ndata_plotting_2 |> \n  filter(Square == \"A\" & Weight < 10 & between(Thick, 0.2, 20))\n```\n\nWe also don't want rows that have `NA` values in the `Material` column.\n\n```{r filter_7}\ndata_plotting_2 <- data_plotting_2|> \n  filter(Square == \"A\" & Weight < 10 & between(Thick, 0.2, 20) & !is.na(Material))\n\n```\n\nWe now want to create a scatterplot of the `Weight` and `Thick` columns. Scatterplots can be used in archaeology to examine correlations between two variable of an object, for example the depth from which it was excavated and the time it can be dated to. In that sense it also allows us to visually find outliers that might infer an unusual activity or previously unexplained pattern.\n\nCreate the empty plot, now define both `x` and `y`.\n\n```{r ggplot_6, message=FALSE, warning=FALSE}\n ggplot(data_plotting_2, aes(x = Weight, y = Thick))\n```\n\nAdd the `geom_point()` layer that creates a scatterplot.\n\n```{r ggplot_7, message=FALSE, warning=FALSE}\n ggplot(data_plotting_2, aes(x = Weight, y = Thick)) +\n  geom_point()\n```\n\nIt may again be useful to change the x axis to a logarithmic scale.\n\n```{r ggplot_8, message=FALSE, warning=FALSE}\n ggplot(data_plotting_2, aes(x = Weight, y = Thick)) +\n  geom_point() +\n  scale_x_log10()\n```\n\nWe can also do the same for the y axis this time.\n\n```{r ggplot_9, message=FALSE, warning=FALSE}\n ggplot(data_plotting_2, aes(x = Weight, y = Thick)) +\n  geom_point() +\n  scale_x_log10() +\n  scale_y_log10()\n```\n\nWe now set the theme, as well as changing the axis labels, for which we use the `labs()` function that has all types of useful arguments to change the labels of our plots.\n\n```{r ggplot_10, message=FALSE, warning=FALSE}\n ggplot(data_plotting_2, aes(x = Weight, y = Thick)) +\n  geom_point() +\n  scale_x_log10() +\n  scale_y_log10() +\n  theme_bw() +\n  labs(x = \"Weight (g)\", y = \"Thickness (mm)\")\n```\n\nWe can also add a colour to the points based on the material the object is made of. We do this by adding the `colour` argument to the `aes()` function and telling it to base the color on the `Material` column.\n\n```{r ggplot_11, message=FALSE, warning=FALSE}\n ggplot(data_plotting_2, aes(x = Weight, y = Thick, colour = Material)) +\n  geom_point() +\n  scale_x_log10() +\n  scale_y_log10() +\n  theme_bw() +\n  labs(x = \"Weight (g)\", y = \"Thickness (mm)\")\n```\n\nUsing the `theme()` function (not to be mixed up with the different `themes` functions), we can change the position of the legend. We need to specify the x and y coordinates of the legend. This uses a coordinate system between 0 and 1, so 0.5 is in the middle. When you create your own graphs, finding the right position might take some try and error.\n\n```{r ggplot_12, message=FALSE, warning=FALSE}\nggplot(data_plotting_2, aes(x = Weight, y = Thick, colour = Material)) +\n  geom_point() +\n  scale_x_log10() +\n  scale_y_log10() +\n  theme_bw() +\n  labs(x = \"Weight (g)\", y = \"Thickness (mm)\") +\n  theme(legend.position = c(0.85, 0.3))\n```\n\nExamining this graph, we observe a clear relationship between an object's thickness and its weight. While this relationship is intuitive, it is important to note that both axes have been transformed using a logarithmic scale. A closer inspection reveals that as thickness increases, weight increases at a slightly greater rate. This aligns with expectations, as volume—which is related to weight—scales non-linearly with an object's dimensions, including thickness in this case.\n\nApart from that, the colors allow us to see that the most common material used is by far chert. This is in line with our expectations, as chert is and was widely available, easily worked with and very durable.\n\n## Plot 3:\n\nOur goal now is to make a boxplot of a `plat_area` column, grouped by the `Material` column. Boxplots are useful to use in archaeology to estimate size distributions by a category like we are doing it here. Lets get the data first. We need to create the `plat_area` column first.\n\n```{r boxplot_1}\ndata_plat_area <- data |> \n  mutate(plat_area = Platwid * Platthic)\n```\n\nNow we only keep materials that have more than 5 objects and remove `NA` values. To create subgroups within a data frame use the `group_by()` function that requires a column as input based on which groups will be created.\n\n```{r boxplot_2}\ndata_plotting_3 <- data_plat_area |> \n  group_by(Material) |>\n  filter(n() > 5 & !is.na(Material))\n```\n\nNow create the plot using the `geom_boxplot()` function. We leave the code for a homework assignment.\n\n```{r boxplot_3, echo = FALSE, warning=FALSE}\nggplot(data = data_plotting_3) +  \n  aes(x = Material,  \n      y = plat_area) +  \n  geom_boxplot() +  \n  scale_y_log10() +  \n  labs(x = \"Raw Material\",  \n       y =  \"Platform Area\") +  \n  theme_classic(base_size = 14)\n```\n\nThis graph shows us that some materials, such as chert and volcanic, show a wider range of platform areas, suggesting they were worked in diverse ways. Obsidian on the other hand has a relatively small range, likely due to its brittle nature and conchoidal fracture properties. At the same time, the clustering of platform sizes for materials like obsidian or quartz suggests these materials might have been processed in a relatively standardized way.\n\nAdditionally, the presence of outliers hints at the fact that there might be some exceptionally large (small) pieces. This observation goes hand in hand with our earlier observation that there were some extremely heavy findings.\n\n## Plot 4:\n\nWe now want to create a plot that shows the number of objects per material. First get the data.\n\nTo get the number of objects we make use of the `count()` function. The count function counts the number of unique values in a column and returns a summary table with the values and their counts.\n\n```{r barplot_1}\ndata_plotting_4 <- data_plotting_3 |> \n  group_by(Material) |> \n  count()\n```\n\nNow create the plot using the `geom_col()` function.\n\n```{r barplot_2, warning=FALSE}\nggplot(data = data_plotting_4) +  \n  aes(x = Material,  \n      y = n) +  \n  geom_col() +  \n  scale_y_log10() +  \n  labs(x = \"Raw Material\",  \n       y =  \"Number of Objects\") +  \n  theme_classic(base_size = 14)\n```\n\nWe can change the order of the columns using the `reorder()` function. We need to specify the column we want to reorder, and the column we want to order by. In this case, we want to order the `Material` column by the `n` column to order the columns by height.\n\n```{r barplot_3, warning=FALSE}\nggplot(data = data_plotting_4) +  \n  aes(x = reorder(Material, n),  \n      y = n) +  \n  geom_col() +  \n  scale_y_log10() +  \n  labs(x = \"Raw Material\",  \n       y =  \"Number of Objects\") +  \n  theme_classic(base_size = 14)\n```\n\nIf we wanted to create a top 5 plot, we would first arrange the data by the `n` column, and then only keep the top 5 rows. Here we make use of the `arrange()` function which can rearrange columns. By default, `arrange()` orders in ascending order, so if we want to arrange in descending order, we have to add the `desc()` function in the `arrange()` function.\n\n```{r barplot_5, warning=FALSE}\ndata_plotting_4 <- data_plotting_4 |> \n  arrange(desc(n)) |> \n  head(5)\n\nggplot(data = data_plotting_4, \n       aes(x = reorder(Material, n), y = n)\n       ) +\n  geom_col() +\n  scale_y_log10() +\n  labs(x = \"Raw Material\", y = \"Number of Objects\") +\n  theme_classic(base_size = 14)\n```\n\nSimilarly to our previous plot, we can see the popularity of chert as a material due to its availability, how easy it is to work with, its properties and the fact that it is quite durable, withstanding the test of time better than other materials. Volcanic objects are the second most popular, which could be due to their useful fracturing properties giving them very sharp edges that were commonly used. Quartz, quartzite and silcrete show a progressively lower count, which could be due to availability, manufacturing difficulties, or cultural preferences.\n\n## Plot 5:\n\nNow lets say we want to make a plot of the distributions of length of each object. We can either manually create each plot by filtering for each material, or we can simply use the `facet_wrap()` function that splits a plot up by a column.\n\n```{r facet_wrap_1}\nggplot(data = data_plotting_3) +  \n  aes(x = Length) +  \n  geom_histogram() +  \n  facet_wrap(~Material) +  \n  labs(x = \"Length (mm)\",  \n       y =  \"Number of Objects\") +  \n  theme_classic(base_size = 14)\n```\n\nDue to the amount of chert items in the data, this is not very useful, but with the `scales` argument we can set the `y` axis to be free for each plot.\n\n```{r facet_wrap_2, warning=FALSE, message=FALSE}\nggplot(data = data_plotting_3) +  \n  aes(x = Length) +  \n  geom_histogram() +  \n  facet_wrap(~Material, scales = \"free_y\") +  \n  labs(x = \"Length (mm)\",  \n       y =  \"Number of Objects\") +  \n  theme_classic(base_size = 14)\n```\n\nIn this graph, chert dominates once again in terms of quantity. However, most chert artifacts are small (under 25 mm), suggesting intensive reduction sequences or the frequent production of small tools or flakes. This distribution between smaller and larger object appears to be common as we would expect at this point, with larger objects being rarer.\n\nOnly volcanic and unknown materials appear to have a few more objects above 25mm in length, at least in comparison to the other materials.\n\n## Homework assignments\n\nFor all assignments, consider how your findings allow you to infer relevant archaeological conclusions from the data.\n\n### Assignment 1\n\nCreate the plot below. This is the same plot as we made earlier in the workshop.\n\n```{r assignment_1, echo = FALSE, warning=FALSE}\nggplot(data = data_plotting_3) +  \n  aes(x = Material,  \n      y = plat_area) +  \n  geom_boxplot() +  \n  scale_y_log10() +  \n  labs(x = \"Raw Material\",  \n       y =  \"Platform Area\") +  \n  theme_classic(base_size = 14)\n```\n\n### Assignment 2\n\nCreate the plot below of the most common colors. You will need to perform some data manipulation first.\n\n```{r assignment_2, echo = FALSE, warning=FALSE}\ndata_colour_count <- data |>\n  group_by(Colour) |> \n  count() |> \n  drop_na(Colour) |> \n  arrange(desc(n)) |>\n  head(7)\n\nggplot(data = data_colour_count) + \n  aes(x = reorder(Colour, n), y = n) +\n  geom_col() +\n  labs(x = \"Colour\", y = \"Number of Objects\") +\n  theme_classic(base_size = 14) \n```\n\n### Assignment 3\n\nWhat is the most common term in the dataset? Create a tibble that contains the term (use the variable `Term`) and the number of times it occurs.\n","srcMarkdownNoYaml":"\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE, message=FALSE, warning=FALSE, error=FALSE)\n```\n\n## Introduction\n\nIn this workshop, we will expand on some of the basic functions, use tidyverse more and introduce some archaeology specific functions. It will follow the flow of a more typical data analysis workflow. We will again work with data about lithics from the Jerimalai rockshelter in East-Timor. This workshop has been inspired by the 'tidyverse for archaeologists' workshop by Professor Ben Marwick.\n\nSome of the code will be evaluated here, but some will not so please copy and paste the code into your own script and run it there.\n\nLoad the `tidyverse` and `rio` packages.\n\n```{r tidyverse, message=FALSE, warning=FALSE}\nlibrary(tidyverse)\nlibrary(rio)\n```\n\n## Data\n\nRemember that the data comes in the form of an excel file from a link, and that we load it in using the `import` function from the `rio` package.\n\n```{r import, message=FALSE, warning=FALSE}\ndata <- import(\"https://bit.ly/j_data_xlsx\", setclass = \"tbl_df\")\n```\n\nLet's have a more detailed look at the data.\n\n```{r looking_at_data, eval = FALSE}\nView(data)\nsummary(data)\n```\n\nThis is a lot of information, and not that useful for us, as it is more useful when dealing with true numerical data, something that happens more rarely in archaeological data science than in other disciplines.\n\nLet's try out some other new functions to look at a data frame that might be more useful in this case.\n\n```{r numbers_and_names}\nnames(data)\nhead(data)\n```\n\nWe will select the `Square`, `Spit`, `Material`, `Weight`, `Thick` and `Colour` columns. Note that we can select multiple columns in one go using the comma.\n\n```{r select, eval=FALSE}\ndata |> \n  select(Square, Spit, Material, Weight, Thick, Colour)\n```\n\n## Plot 1:\n\nWe now want to get into plotting our data. For this we are again only interested in the `Square`, `Spit`, `Material`, `Weight` and `Thick` columns.\n\nWile we work with data, we often change our data sets quite a lot depending on what we want to investigate, so it is necessary to cache our data sets under different names. That way we always keep track of which data is stored where, which is particularly important in archaeology given the vastly different types of analysis we can conduct with our data.\n\n```{r select_2, message=FALSE, warning=FALSE}\ndata_plotting <- data |> \n  select(Square, Spit, Material, Weight, Thick)\n\nprint(data_plotting)\n```\n\nWe can now create a histogram of the `Weight` column. This will show how many artefacts have a certain weight. Creating histograms of a variable is a common practice in archaeology, as it provides a quick visual overview of patterns. We can do this using the important `ggplot()` function. This function takes a tibble, and can then create all kinds of plots. `ggplot()` works with layers.\n\nWe can add these layers with a + sign. The base command is `ggplot()`. This creates a white canvas, and you can add information by adding layers.\n\n```{r ggplot, message=FALSE, warning=FALSE}\nggplot(data = data_plotting)\n```\n\nSince we have not told ggplot how to display the data yet, we still have a blank canvas.\n\nAs we want to make a histogram, we only need to specify the x axis, which is done by the `aes()` function within the `mapping` argument.\n\n```{r ggplot_2, message=FALSE, warning=FALSE}\nggplot(data = data_plotting, mapping = aes(x = Weight))\n```\n\nWe have now filled in the two most important `arguments` from `ggplot()`, `data` and `mapping`. Since these arguments are always the first two arguments in the `ggplot()` function, we often do not explicitly name them to save us some time.\n\nHowever, we still do not see a histogram, so now we need to add a layer that actually tells ggplot that we want the plot to be a histogram.\n\nThe layers that define the type of plot are known as `geoms()`. There are many different geoms, but we want to create a histogram, so we will use the `geom_histogram()` function.\n\n```{r ggplot_3, message=FALSE, warning=FALSE}\nggplot(data_plotting, aes(x = Weight)) +\n  geom_histogram()\n```\n\nWe can see our data on the plot!\n\nHowever, there appear to be some weights that are very large and cause the graph to stretch to 600, whilst most are close to zero. If we change the x-axis scale to a logaritmic scale, we can see the distribution better. We edit the scale by adding a new layer to our plot, in our case in the form of the `scale_x_log10()` function.\n\nA logarithm is a mathematical function that increases slowly at first, and then faster and faster. This is useful for data that has a large range (something you will be encountering more often with archaeological data), as it compresses the data and makes it easier to see the distribution. This specific logarithm is the base 10 logarithm, which means that 10 is raised to the power of the number on the x axis. For example, 10\\^2 = 100, so the number 2 would be at the position 100 on the x axis.\n\n```{r ggplot_4, message=FALSE, warning=FALSE}\nggplot(data_plotting, aes(x = Weight)) +\n  geom_histogram() +\n  scale_x_log10()\n```\n\nNow that it finally looks like an actual histogram, we can give it a last touch by changing the theme of the plot. This is purely an optical change and there are many themes available, but we will just use the `theme_bw()` theme for now, which we add like any other layer to our `ggplot()`.\n\n```{r ggplot_5, message=FALSE, warning=FALSE}\nggplot(data_plotting, aes(x = Weight)) +\n  geom_histogram() +\n  scale_x_log10() +\n  theme_bw()\n```\n\nThe graph shows us that the majority of findings are very light, yet a few are extremely heavy. This makes sense, considering that we expect the majority of pottery remnants we find to be only shards or smaller objects used in everyday life, with some rarer special items being very heavy.\n\n## Plot 2:\n\nfor our next plot, we only want to keep rows that have the \"A\" value for the `Square` column. We can do this using the `filter()` function. Keep in mind that \"A\" is a string, so we need to use quotation marks and two equal signs.\n\n```{r filter}\ndata_plotting_2 <- data |> \n  filter(Square == \"A\")\n```\n\nNow, from these rows we only want light objects, lets say with a `Weight` less than 10. We can do this by adding another condition to our `filter()` with the `&` (\"and\") operator.\n\n```{r filter_2}\ndata_plotting_2 |>\n  filter(Square == \"A\" & Weight < 10)\n```\n\n`&` is a very useful logical operator. Another very common logical operator is `|` (Shift + /), which stands for \"or\". If we wanted to include all observations that have an \"A\" or \"a\" value in the `Square` column for example, we could write the following code:\n\n```{r filter_6}\ndata_example_or <- data |>\n  filter(Square == \"A\" | Square == \"a\")\n```\n\nFor now we will continue and add to our previous filters though.\n\nWe also want a thickness between 0.2 and 20. We can either do this by adding two additional conditions, or by using the `between()` function.\n\n```{r filter_3}\ndata_plotting_2 |> \n  filter(Square == \"A\" & Weight < 10 & Thick > 0.2 & Thick < 20)\n```\n\n```{r filter_4}\ndata_plotting_2 |> \n  filter(Square == \"A\" & Weight < 10 & between(Thick, 0.2, 20))\n```\n\nWe also don't want rows that have `NA` values in the `Material` column.\n\n```{r filter_7}\ndata_plotting_2 <- data_plotting_2|> \n  filter(Square == \"A\" & Weight < 10 & between(Thick, 0.2, 20) & !is.na(Material))\n\n```\n\nWe now want to create a scatterplot of the `Weight` and `Thick` columns. Scatterplots can be used in archaeology to examine correlations between two variable of an object, for example the depth from which it was excavated and the time it can be dated to. In that sense it also allows us to visually find outliers that might infer an unusual activity or previously unexplained pattern.\n\nCreate the empty plot, now define both `x` and `y`.\n\n```{r ggplot_6, message=FALSE, warning=FALSE}\n ggplot(data_plotting_2, aes(x = Weight, y = Thick))\n```\n\nAdd the `geom_point()` layer that creates a scatterplot.\n\n```{r ggplot_7, message=FALSE, warning=FALSE}\n ggplot(data_plotting_2, aes(x = Weight, y = Thick)) +\n  geom_point()\n```\n\nIt may again be useful to change the x axis to a logarithmic scale.\n\n```{r ggplot_8, message=FALSE, warning=FALSE}\n ggplot(data_plotting_2, aes(x = Weight, y = Thick)) +\n  geom_point() +\n  scale_x_log10()\n```\n\nWe can also do the same for the y axis this time.\n\n```{r ggplot_9, message=FALSE, warning=FALSE}\n ggplot(data_plotting_2, aes(x = Weight, y = Thick)) +\n  geom_point() +\n  scale_x_log10() +\n  scale_y_log10()\n```\n\nWe now set the theme, as well as changing the axis labels, for which we use the `labs()` function that has all types of useful arguments to change the labels of our plots.\n\n```{r ggplot_10, message=FALSE, warning=FALSE}\n ggplot(data_plotting_2, aes(x = Weight, y = Thick)) +\n  geom_point() +\n  scale_x_log10() +\n  scale_y_log10() +\n  theme_bw() +\n  labs(x = \"Weight (g)\", y = \"Thickness (mm)\")\n```\n\nWe can also add a colour to the points based on the material the object is made of. We do this by adding the `colour` argument to the `aes()` function and telling it to base the color on the `Material` column.\n\n```{r ggplot_11, message=FALSE, warning=FALSE}\n ggplot(data_plotting_2, aes(x = Weight, y = Thick, colour = Material)) +\n  geom_point() +\n  scale_x_log10() +\n  scale_y_log10() +\n  theme_bw() +\n  labs(x = \"Weight (g)\", y = \"Thickness (mm)\")\n```\n\nUsing the `theme()` function (not to be mixed up with the different `themes` functions), we can change the position of the legend. We need to specify the x and y coordinates of the legend. This uses a coordinate system between 0 and 1, so 0.5 is in the middle. When you create your own graphs, finding the right position might take some try and error.\n\n```{r ggplot_12, message=FALSE, warning=FALSE}\nggplot(data_plotting_2, aes(x = Weight, y = Thick, colour = Material)) +\n  geom_point() +\n  scale_x_log10() +\n  scale_y_log10() +\n  theme_bw() +\n  labs(x = \"Weight (g)\", y = \"Thickness (mm)\") +\n  theme(legend.position = c(0.85, 0.3))\n```\n\nExamining this graph, we observe a clear relationship between an object's thickness and its weight. While this relationship is intuitive, it is important to note that both axes have been transformed using a logarithmic scale. A closer inspection reveals that as thickness increases, weight increases at a slightly greater rate. This aligns with expectations, as volume—which is related to weight—scales non-linearly with an object's dimensions, including thickness in this case.\n\nApart from that, the colors allow us to see that the most common material used is by far chert. This is in line with our expectations, as chert is and was widely available, easily worked with and very durable.\n\n## Plot 3:\n\nOur goal now is to make a boxplot of a `plat_area` column, grouped by the `Material` column. Boxplots are useful to use in archaeology to estimate size distributions by a category like we are doing it here. Lets get the data first. We need to create the `plat_area` column first.\n\n```{r boxplot_1}\ndata_plat_area <- data |> \n  mutate(plat_area = Platwid * Platthic)\n```\n\nNow we only keep materials that have more than 5 objects and remove `NA` values. To create subgroups within a data frame use the `group_by()` function that requires a column as input based on which groups will be created.\n\n```{r boxplot_2}\ndata_plotting_3 <- data_plat_area |> \n  group_by(Material) |>\n  filter(n() > 5 & !is.na(Material))\n```\n\nNow create the plot using the `geom_boxplot()` function. We leave the code for a homework assignment.\n\n```{r boxplot_3, echo = FALSE, warning=FALSE}\nggplot(data = data_plotting_3) +  \n  aes(x = Material,  \n      y = plat_area) +  \n  geom_boxplot() +  \n  scale_y_log10() +  \n  labs(x = \"Raw Material\",  \n       y =  \"Platform Area\") +  \n  theme_classic(base_size = 14)\n```\n\nThis graph shows us that some materials, such as chert and volcanic, show a wider range of platform areas, suggesting they were worked in diverse ways. Obsidian on the other hand has a relatively small range, likely due to its brittle nature and conchoidal fracture properties. At the same time, the clustering of platform sizes for materials like obsidian or quartz suggests these materials might have been processed in a relatively standardized way.\n\nAdditionally, the presence of outliers hints at the fact that there might be some exceptionally large (small) pieces. This observation goes hand in hand with our earlier observation that there were some extremely heavy findings.\n\n## Plot 4:\n\nWe now want to create a plot that shows the number of objects per material. First get the data.\n\nTo get the number of objects we make use of the `count()` function. The count function counts the number of unique values in a column and returns a summary table with the values and their counts.\n\n```{r barplot_1}\ndata_plotting_4 <- data_plotting_3 |> \n  group_by(Material) |> \n  count()\n```\n\nNow create the plot using the `geom_col()` function.\n\n```{r barplot_2, warning=FALSE}\nggplot(data = data_plotting_4) +  \n  aes(x = Material,  \n      y = n) +  \n  geom_col() +  \n  scale_y_log10() +  \n  labs(x = \"Raw Material\",  \n       y =  \"Number of Objects\") +  \n  theme_classic(base_size = 14)\n```\n\nWe can change the order of the columns using the `reorder()` function. We need to specify the column we want to reorder, and the column we want to order by. In this case, we want to order the `Material` column by the `n` column to order the columns by height.\n\n```{r barplot_3, warning=FALSE}\nggplot(data = data_plotting_4) +  \n  aes(x = reorder(Material, n),  \n      y = n) +  \n  geom_col() +  \n  scale_y_log10() +  \n  labs(x = \"Raw Material\",  \n       y =  \"Number of Objects\") +  \n  theme_classic(base_size = 14)\n```\n\nIf we wanted to create a top 5 plot, we would first arrange the data by the `n` column, and then only keep the top 5 rows. Here we make use of the `arrange()` function which can rearrange columns. By default, `arrange()` orders in ascending order, so if we want to arrange in descending order, we have to add the `desc()` function in the `arrange()` function.\n\n```{r barplot_5, warning=FALSE}\ndata_plotting_4 <- data_plotting_4 |> \n  arrange(desc(n)) |> \n  head(5)\n\nggplot(data = data_plotting_4, \n       aes(x = reorder(Material, n), y = n)\n       ) +\n  geom_col() +\n  scale_y_log10() +\n  labs(x = \"Raw Material\", y = \"Number of Objects\") +\n  theme_classic(base_size = 14)\n```\n\nSimilarly to our previous plot, we can see the popularity of chert as a material due to its availability, how easy it is to work with, its properties and the fact that it is quite durable, withstanding the test of time better than other materials. Volcanic objects are the second most popular, which could be due to their useful fracturing properties giving them very sharp edges that were commonly used. Quartz, quartzite and silcrete show a progressively lower count, which could be due to availability, manufacturing difficulties, or cultural preferences.\n\n## Plot 5:\n\nNow lets say we want to make a plot of the distributions of length of each object. We can either manually create each plot by filtering for each material, or we can simply use the `facet_wrap()` function that splits a plot up by a column.\n\n```{r facet_wrap_1}\nggplot(data = data_plotting_3) +  \n  aes(x = Length) +  \n  geom_histogram() +  \n  facet_wrap(~Material) +  \n  labs(x = \"Length (mm)\",  \n       y =  \"Number of Objects\") +  \n  theme_classic(base_size = 14)\n```\n\nDue to the amount of chert items in the data, this is not very useful, but with the `scales` argument we can set the `y` axis to be free for each plot.\n\n```{r facet_wrap_2, warning=FALSE, message=FALSE}\nggplot(data = data_plotting_3) +  \n  aes(x = Length) +  \n  geom_histogram() +  \n  facet_wrap(~Material, scales = \"free_y\") +  \n  labs(x = \"Length (mm)\",  \n       y =  \"Number of Objects\") +  \n  theme_classic(base_size = 14)\n```\n\nIn this graph, chert dominates once again in terms of quantity. However, most chert artifacts are small (under 25 mm), suggesting intensive reduction sequences or the frequent production of small tools or flakes. This distribution between smaller and larger object appears to be common as we would expect at this point, with larger objects being rarer.\n\nOnly volcanic and unknown materials appear to have a few more objects above 25mm in length, at least in comparison to the other materials.\n\n## Homework assignments\n\nFor all assignments, consider how your findings allow you to infer relevant archaeological conclusions from the data.\n\n### Assignment 1\n\nCreate the plot below. This is the same plot as we made earlier in the workshop.\n\n```{r assignment_1, echo = FALSE, warning=FALSE}\nggplot(data = data_plotting_3) +  \n  aes(x = Material,  \n      y = plat_area) +  \n  geom_boxplot() +  \n  scale_y_log10() +  \n  labs(x = \"Raw Material\",  \n       y =  \"Platform Area\") +  \n  theme_classic(base_size = 14)\n```\n\n### Assignment 2\n\nCreate the plot below of the most common colors. You will need to perform some data manipulation first.\n\n```{r assignment_2, echo = FALSE, warning=FALSE}\ndata_colour_count <- data |>\n  group_by(Colour) |> \n  count() |> \n  drop_na(Colour) |> \n  arrange(desc(n)) |>\n  head(7)\n\nggplot(data = data_colour_count) + \n  aes(x = reorder(Colour, n), y = n) +\n  geom_col() +\n  labs(x = \"Colour\", y = \"Number of Objects\") +\n  theme_classic(base_size = 14) \n```\n\n### Assignment 3\n\nWhat is the most common term in the dataset? Create a tibble that contains the term (use the variable `Term`) and the number of times it occurs.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"output-file":"workshop2.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.555","editor":"visual","theme":"simplex","mainfont":"Cormorant SC","fontsize":"20px","layout":"page","title":"AH-ANTQ103: Workshop 2","subtitle":"Spring 2025","date":"Last updated: `r Sys.Date()`"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}